datacenter = {{ consul_config.dc }}
data_dir   = {{ consul_config.data_dir }}
server = {{ consul_config.server }}
retry_join = [{{ consul_config.join_addr }}]

addresses {
  http = "127.0.0.1 {{ GetInterfaceIP "{{ eth_interface }}" }} {{ GetInterfaceIP \"docker0\" }}"
}

advertise_addr = "{{ GetInterfaceIP "{{ eth_interface }}" }}"

ports {
  grpc  = 8502
  dns   = 8600
  http  = 8500
  https = 8501
}

ui_config {
  enabled = true
}

connect {
  enabled = true
}

telemetry {
  prometheus_retention_time = "24h"
  disable_hostname          = true
}

# Enable script checks
enable_script_checks       = true
enable_local_script_checks = true

tls {
  defaults {
    verify_incoming = false
    verify_outgoing = false
  }
  grpc {
    use_auto_cert = false
  }
}

acl = {
  enabled                  = true
  default_policy           = "allow"
  enable_token_persistence = true
}

bootstrap_expect = 3